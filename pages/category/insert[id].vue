<template>
  <div class="flex flex-wrap">
    <ModalDelete v-if="showModal == true" />
<div v-show="!showFormSec">
    <strong class="title flex w-full mb-2">
      {{ $t("CategoryTree") }}
    </strong>

    <ul class="parent-list flex bg-[#fff] p-4 items-start lg:w-full border">
      <li class="px-2 flex items-center">
        <span> {{ $t("parent") }}:{{ pageData?.name }}</span>
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-chevron-right"
          viewBox="0 0 16 16"
        >
          <path
            fill-rule="evenodd"
            d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"
          />
        </svg>
      </li>

      <li class="px-2 mr-2 border-r">
        <ul class="subcategory">
          <li
            v-for="(item, index) in pageData?.children"
            :key="item"
            class="flex flex-wrap items-center"
          >
            <strong>{{ index + 1 }}.</strong>
            <span
              >{{ item.name }} <sub>({{ item?.label }})</sub></span
            >

            <div
              class="btn-box flex items-center justify-center w-[140px] p-1 my-1"
            >
              <button class="btn" @click="addSubCategory(item.id)">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M3 11.9995C3 10.8176 3.23279 9.64736 3.68508 8.55548C4.13738 7.46361 4.80031 6.4715 5.63604 5.63581C6.47177 4.80013 7.46392 4.13722 8.55585 3.68495C9.64778 3.23268 10.8181 2.9999 12 2.9999C13.1819 2.9999 14.3522 3.23268 15.4442 3.68495C16.5361 4.13722 17.5282 4.80013 18.364 5.63581C19.1997 6.4715 19.8626 7.46361 20.3149 8.55548C20.7672 9.64736 21 10.8176 21 11.9995C21 14.3863 20.0518 16.6754 18.364 18.3631C16.6761 20.0509 14.3869 20.999 12 20.999C9.61305 20.999 7.32387 20.0509 5.63604 18.3631C3.94821 16.6754 3 14.3863 3 11.9995ZM12 1C5.925 1 1 5.92476 1 11.9995C1 18.0742 5.925 22.9989 12 22.9989C18.075 22.9989 23 18.0742 23 11.9995C23 5.92476 18.075 1 12 1ZM13 6.99971C13 6.73451 12.8946 6.48016 12.7071 6.29264C12.5196 6.10511 12.2652 5.99976 12 5.99976C11.7348 5.99976 11.4804 6.10511 11.2929 6.29264C11.1054 6.48016 11 6.73451 11 6.99971V10.9995H7C6.73478 10.9995 6.48043 11.1049 6.29289 11.2924C6.10536 11.4799 6 11.7343 6 11.9995C6 12.2647 6.10536 12.519 6.29289 12.7065C6.48043 12.8941 6.73478 12.9994 7 12.9994H11V16.9992C11 17.2644 11.1054 17.5188 11.2929 17.7063C11.4804 17.8938 11.7348 17.9992 12 17.9992C12.2652 17.9992 12.5196 17.8938 12.7071 17.7063C12.8946 17.5188 13 17.2644 13 16.9992V12.9994H17C17.2652 12.9994 17.5196 12.8941 17.7071 12.7065C17.8946 12.519 18 12.2647 18 11.9995C18 11.7343 17.8946 11.4799 17.7071 11.2924C17.5196 11.1049 17.2652 10.9995 17 10.9995H13V6.99971Z"
                    fill="black"
                  />
                </svg>
              </button>

              <NuxtLink  :to="'/categoryFeature/insert' + item.id" class="btn">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M6 4C5.46957 4 4.96086 4.21071 4.58579 4.58579C4.21071 4.96086 4 5.46957 4 6V9C4 9.53043 4.21071 10.0391 4.58579 10.4142C4.96086 10.7893 5.46957 11 6 11H9C9.53043 11 10.0391 10.7893 10.4142 10.4142C10.7893 10.0391 11 9.53043 11 9V6C11 5.46957 10.7893 4.96086 10.4142 4.58579C10.0391 4.21071 9.53043 4 9 4H6ZM6 6H9V9H6V6ZM14 6C13.7348 6 13.4804 6.10536 13.2929 6.29289C13.1054 6.48043 13 6.73478 13 7C13 7.26522 13.1054 7.51957 13.2929 7.70711C13.4804 7.89464 13.7348 8 14 8H19C19.2652 8 19.5196 7.89464 19.7071 7.70711C19.8946 7.51957 20 7.26522 20 7C20 6.73478 19.8946 6.48043 19.7071 6.29289C19.5196 6.10536 19.2652 6 19 6H14ZM14 15C13.7348 15 13.4804 15.1054 13.2929 15.2929C13.1054 15.4804 13 15.7348 13 16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17H19C19.2652 17 19.5196 16.8946 19.7071 16.7071C19.8946 16.5196 20 16.2652 20 16C20 15.7348 19.8946 15.4804 19.7071 15.2929C19.5196 15.1054 19.2652 15 19 15H14ZM4 15C4 14.4696 4.21071 13.9609 4.58579 13.5858C4.96086 13.2107 5.46957 13 6 13H9C9.53043 13 10.0391 13.2107 10.4142 13.5858C10.7893 13.9609 11 14.4696 11 15V18C11 18.5304 10.7893 19.0391 10.4142 19.4142C10.0391 19.7893 9.53043 20 9 20H6C5.46957 20 4.96086 19.7893 4.58579 19.4142C4.21071 19.0391 4 18.5304 4 18V15ZM9 15H6V18H9V15Z"
                    fill="black"
                  />
                </svg>
              </NuxtLink>
              <!-- <NuxtLink :to="'/discount?categoryId='+item?.id+'&isAvailable='+true" class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12.79 21L3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83z"/><path fill="currentColor" d="M11.38 17.41c.39.39.9.59 1.41.59c.51 0 1.02-.2 1.41-.59l6.21-6.21c.78-.78.78-2.05 0-2.83L12.62.58C12.25.21 11.74 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41zM5 2h6.21L19 9.79L12.79 16L5 8.21z"/><circle cx="7.25" cy="4.25" r="1.25" fill="currentColor"/></svg>
              </NuxtLink>
              <NuxtLink :to="'/discount/insertnew?typeId=41&catId=' + item.id" class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-tag" viewBox="0 0 16 16">
  <path d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0"/>
  <path d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1m0 5.586 7 7L13.586 9l-7-7H2z"/>
</svg>
              </NuxtLink> -->
              
              <!-- <NuxtLink class="btn" :to="'ruLanguage'+item?.id" title="زبان روسی">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M22.5 11.9995C22.5 17.7982 17.799 22.499 12 22.499C6.201 22.499 1.5 17.7982 1.5 11.9995C1.5 6.20077 6.201 1.5 12 1.5C17.799 1.5 22.5 6.20077 22.5 11.9995ZM18.102 6.08177C17.3104 5.26368 16.3622 4.61343 15.3138 4.16984C14.2654 3.72625 13.1384 3.4984 12 3.4999C10.7497 3.49877 9.51464 3.77401 8.38316 4.30592C7.25168 4.83784 6.25177 5.61328 5.455 6.57675C6.859 5.96278 8.347 5.98878 8.875 5.99778L9 5.99978C9.6 5.99978 10 6.39976 10 6.99973C10 7.5997 9.6 7.99968 9 7.99968C8.4 7.99968 8 8.39966 8 8.99963C8 9.5996 8.6 9.99958 9 9.99958H10C10.55 9.99958 11 10.4496 11 11.0125C10.9966 11.2755 10.8897 11.5265 10.7025 11.7112C10.5154 11.8959 10.263 11.9995 10 11.9995C7.57 11.9995 7.679 13.9994 8 14.6413C8.579 15.7993 10.61 15.4563 11.81 14.6413L12.4 14.1994C12.6122 14.0402 12.8789 13.9719 13.1414 14.0094C13.404 14.0469 13.6409 14.1872 13.8 14.3994C13.9591 14.6115 14.0275 14.8782 13.9899 15.1407C13.9524 15.4033 13.8122 15.6402 13.6 15.7993L13.071 16.1963C10.5 17.9992 13 20.4991 16.43 18.7961C17.999 17.8562 18.589 16.5623 18.704 15.3833C18.7754 14.6129 18.6622 13.8365 18.374 13.1184C18.101 12.4415 17.738 12.0165 17.467 11.8445C17.2841 11.7287 17.1436 11.5567 17.0668 11.3543C16.99 11.1519 16.981 10.93 17.041 10.722C17.1011 10.514 17.2271 10.3311 17.4 10.2009C17.573 10.0706 17.7835 9.99996 18 9.99958C18.21 9.99958 18.51 9.99958 18.856 10.0586C18.8189 9.95227 18.7703 9.85034 18.711 9.75459C18.393 9.22862 17.687 8.57765 16.486 7.85668C16.2987 7.74409 16.1535 7.57327 16.0725 7.37035C15.9916 7.16742 15.9793 6.94355 16.0376 6.73298C16.0958 6.52241 16.2215 6.33672 16.3953 6.20431C16.5691 6.0719 16.7815 6.00006 17 5.99978C17.325 5.99978 17.702 6.01678 18.102 6.08177Z" fill="black"/>
</svg>


            </NuxtLink> -->
              <NuxtLink class="btn" :to="'enLanguage'+item?.id" title="زبان انگلیسی">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M22.5 11.9995C22.5 17.7982 17.799 22.499 12 22.499C6.201 22.499 1.5 17.7982 1.5 11.9995C1.5 6.20077 6.201 1.5 12 1.5C17.799 1.5 22.5 6.20077 22.5 11.9995ZM18.102 6.08177C17.3104 5.26368 16.3622 4.61343 15.3138 4.16984C14.2654 3.72625 13.1384 3.4984 12 3.4999C10.7497 3.49877 9.51464 3.77401 8.38316 4.30592C7.25168 4.83784 6.25177 5.61328 5.455 6.57675C6.859 5.96278 8.347 5.98878 8.875 5.99778L9 5.99978C9.6 5.99978 10 6.39976 10 6.99973C10 7.5997 9.6 7.99968 9 7.99968C8.4 7.99968 8 8.39966 8 8.99963C8 9.5996 8.6 9.99958 9 9.99958H10C10.55 9.99958 11 10.4496 11 11.0125C10.9966 11.2755 10.8897 11.5265 10.7025 11.7112C10.5154 11.8959 10.263 11.9995 10 11.9995C7.57 11.9995 7.679 13.9994 8 14.6413C8.579 15.7993 10.61 15.4563 11.81 14.6413L12.4 14.1994C12.6122 14.0402 12.8789 13.9719 13.1414 14.0094C13.404 14.0469 13.6409 14.1872 13.8 14.3994C13.9591 14.6115 14.0275 14.8782 13.9899 15.1407C13.9524 15.4033 13.8122 15.6402 13.6 15.7993L13.071 16.1963C10.5 17.9992 13 20.4991 16.43 18.7961C17.999 17.8562 18.589 16.5623 18.704 15.3833C18.7754 14.6129 18.6622 13.8365 18.374 13.1184C18.101 12.4415 17.738 12.0165 17.467 11.8445C17.2841 11.7287 17.1436 11.5567 17.0668 11.3543C16.99 11.1519 16.981 10.93 17.041 10.722C17.1011 10.514 17.2271 10.3311 17.4 10.2009C17.573 10.0706 17.7835 9.99996 18 9.99958C18.21 9.99958 18.51 9.99958 18.856 10.0586C18.8189 9.95227 18.7703 9.85034 18.711 9.75459C18.393 9.22862 17.687 8.57765 16.486 7.85668C16.2987 7.74409 16.1535 7.57327 16.0725 7.37035C15.9916 7.16742 15.9793 6.94355 16.0376 6.73298C16.0958 6.52241 16.2215 6.33672 16.3953 6.20431C16.5691 6.0719 16.7815 6.00006 17 5.99978C17.325 5.99978 17.702 6.01678 18.102 6.08177Z" fill="black"/>
</svg>


            </NuxtLink>
              <button class="btn" @click="getCategoryItem(item.id)">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M21.121 2.707C20.5584 2.14459 19.7955 1.82864 19 1.82864C18.2045 1.82864 17.4416 2.14459 16.879 2.707L15.199 4.387L7.293 12.293C7.16494 12.421 7.07404 12.5814 7.03 12.757L6.03 16.757C5.98803 16.9246 5.99018 17.1002 6.03626 17.2667C6.08234 17.4332 6.17077 17.5849 6.29293 17.7071C6.41509 17.8292 6.56681 17.9177 6.73331 17.9637C6.89982 18.0098 7.07542 18.012 7.243 17.97L11.243 16.97C11.4186 16.926 11.579 16.8351 11.707 16.707L19.556 8.859L21.293 7.121C21.8554 6.55842 22.1714 5.7955 22.1714 5C22.1714 4.20451 21.8554 3.44159 21.293 2.879L21.121 2.707ZM18.293 4.121C18.4805 3.93353 18.7348 3.82822 19 3.82822C19.2652 3.82822 19.5195 3.93353 19.707 4.121L19.879 4.293C20.0665 4.48053 20.1718 4.73484 20.1718 5C20.1718 5.26517 20.0665 5.51948 19.879 5.707L18.862 6.724L17.307 5.107L18.293 4.121ZM15.893 6.521L17.448 8.138L10.488 15.097L8.374 15.626L8.903 13.511L15.893 6.521ZM4 8C4 7.73479 4.10536 7.48043 4.29289 7.2929C4.48043 7.10536 4.73478 7 5 7H10C10.2652 7 10.5196 6.89465 10.7071 6.70711C10.8946 6.51957 11 6.26522 11 6C11 5.73479 10.8946 5.48043 10.7071 5.2929C10.5196 5.10536 10.2652 5 10 5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V19C2 19.7957 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H16C16.7956 22 17.5587 21.6839 18.1213 21.1213C18.6839 20.5587 19 19.7957 19 19V14C19 13.7348 18.8946 13.4804 18.7071 13.2929C18.5196 13.1054 18.2652 13 18 13C17.7348 13 17.4804 13.1054 17.2929 13.2929C17.1054 13.4804 17 13.7348 17 14V19C17 19.2652 16.8946 19.5196 16.7071 19.7071C16.5196 19.8946 16.2652 20 16 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V8Z"
                    fill="black"
                  />
                </svg>
              </button>
              <button class="btn" @click="()=>{showDeleteModal = true ;elId=item?.id}">
                <svg
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M9 5C9 4.46957 9.21071 3.96086 9.58579 3.58579C9.96086 3.21071 10.4696 3 11 3H13C13.5304 3 14.0391 3.21071 14.4142 3.58579C14.7893 3.96086 15 4.46957 15 5V6H19C19.2652 6 19.5196 6.10536 19.7071 6.29289C19.8946 6.48043 20 6.73478 20 7C20 7.26522 19.8946 7.51957 19.7071 7.70711C19.5196 7.89464 19.2652 8 19 8H18V18C18 18.7956 17.6839 19.5587 17.1213 20.1213C16.5587 20.6839 15.7956 21 15 21H9C8.20435 21 7.44129 20.6839 6.87868 20.1213C6.31607 19.5587 6 18.7956 6 18V8H5C4.73478 8 4.48043 7.89464 4.29289 7.70711C4.10536 7.51957 4 7.26522 4 7C4 6.73478 4.10536 6.48043 4.29289 6.29289C4.48043 6.10536 4.73478 6 5 6H9V5ZM10 8H8V18C8 18.2652 8.10536 18.5196 8.29289 18.7071C8.48043 18.8946 8.73478 19 9 19H15C15.2652 19 15.5196 18.8946 15.7071 18.7071C15.8946 18.5196 16 18.2652 16 18V8H10ZM13 6H11V5H13V6ZM10 9C10.2652 9 10.5196 9.10536 10.7071 9.29289C10.8946 9.48043 11 9.73478 11 10V17C11 17.2652 10.8946 17.5196 10.7071 17.7071C10.5196 17.8946 10.2652 18 10 18C9.73478 18 9.48043 17.8946 9.29289 17.7071C9.10536 17.5196 9 17.2652 9 17V10C9 9.73478 9.10536 9.48043 9.29289 9.29289C9.48043 9.10536 9.73478 9 10 9ZM14 9C14.2652 9 14.5196 9.10536 14.7071 9.29289C14.8946 9.48043 15 9.73478 15 10V17C15 17.2652 14.8946 17.5196 14.7071 17.7071C14.5196 17.8946 14.2652 18 14 18C13.7348 18 13.4804 17.8946 13.2929 17.7071C13.1054 17.5196 13 17.2652 13 17V10C13 9.73478 13.1054 9.48043 13.2929 9.29289C13.4804 9.10536 13.7348 9 14 9Z"
                    fill="black"
                  />
                </svg>
              </button>
            </div>
            <br />
            <ul class="w-full ps-5 list-disc">
              <li
                v-for="element in item.children"
                :key="element?.id"
                class="flex flex-wrap items-center"
              >
                <span
                  >{{ element.name }} <sub>({{ element?.label }})</sub></span
                >

                <div
                  class="btn-box flex items-center justify-center w-[140px] p-1 my-1"
                >
                  <button class="btn" @click="addSubCategory(element.id)">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M3 11.9995C3 10.8176 3.23279 9.64736 3.68508 8.55548C4.13738 7.46361 4.80031 6.4715 5.63604 5.63581C6.47177 4.80013 7.46392 4.13722 8.55585 3.68495C9.64778 3.23268 10.8181 2.9999 12 2.9999C13.1819 2.9999 14.3522 3.23268 15.4442 3.68495C16.5361 4.13722 17.5282 4.80013 18.364 5.63581C19.1997 6.4715 19.8626 7.46361 20.3149 8.55548C20.7672 9.64736 21 10.8176 21 11.9995C21 14.3863 20.0518 16.6754 18.364 18.3631C16.6761 20.0509 14.3869 20.999 12 20.999C9.61305 20.999 7.32387 20.0509 5.63604 18.3631C3.94821 16.6754 3 14.3863 3 11.9995ZM12 1C5.925 1 1 5.92476 1 11.9995C1 18.0742 5.925 22.9989 12 22.9989C18.075 22.9989 23 18.0742 23 11.9995C23 5.92476 18.075 1 12 1ZM13 6.99971C13 6.73451 12.8946 6.48016 12.7071 6.29264C12.5196 6.10511 12.2652 5.99976 12 5.99976C11.7348 5.99976 11.4804 6.10511 11.2929 6.29264C11.1054 6.48016 11 6.73451 11 6.99971V10.9995H7C6.73478 10.9995 6.48043 11.1049 6.29289 11.2924C6.10536 11.4799 6 11.7343 6 11.9995C6 12.2647 6.10536 12.519 6.29289 12.7065C6.48043 12.8941 6.73478 12.9994 7 12.9994H11V16.9992C11 17.2644 11.1054 17.5188 11.2929 17.7063C11.4804 17.8938 11.7348 17.9992 12 17.9992C12.2652 17.9992 12.5196 17.8938 12.7071 17.7063C12.8946 17.5188 13 17.2644 13 16.9992V12.9994H17C17.2652 12.9994 17.5196 12.8941 17.7071 12.7065C17.8946 12.519 18 12.2647 18 11.9995C18 11.7343 17.8946 11.4799 17.7071 11.2924C17.5196 11.1049 17.2652 10.9995 17 10.9995H13V6.99971Z"
                        fill="black"
                      />
                    </svg>
                  </button>
                  <!-- <NuxtLink :to="'/discount?categoryId='+item?.id+'&isAvailable='+true" class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12.79 21L3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83z"/><path fill="currentColor" d="M11.38 17.41c.39.39.9.59 1.41.59c.51 0 1.02-.2 1.41-.59l6.21-6.21c.78-.78.78-2.05 0-2.83L12.62.58C12.25.21 11.74 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41zM5 2h6.21L19 9.79L12.79 16L5 8.21z"/><circle cx="7.25" cy="4.25" r="1.25" fill="currentColor"/></svg>
              </NuxtLink>
              <NuxtLink :to="'/discount/insertnew?typeId=41&catId=' + item.id" class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-tag" viewBox="0 0 16 16">
  <path d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0"/>
  <path d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1m0 5.586 7 7L13.586 9l-7-7H2z"/>
</svg>
              </NuxtLink> -->
                  <NuxtLink
                    :to="'/categoryFeature/insert' + element.id"
                    class="btn"
                  >
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M6 4C5.46957 4 4.96086 4.21071 4.58579 4.58579C4.21071 4.96086 4 5.46957 4 6V9C4 9.53043 4.21071 10.0391 4.58579 10.4142C4.96086 10.7893 5.46957 11 6 11H9C9.53043 11 10.0391 10.7893 10.4142 10.4142C10.7893 10.0391 11 9.53043 11 9V6C11 5.46957 10.7893 4.96086 10.4142 4.58579C10.0391 4.21071 9.53043 4 9 4H6ZM6 6H9V9H6V6ZM14 6C13.7348 6 13.4804 6.10536 13.2929 6.29289C13.1054 6.48043 13 6.73478 13 7C13 7.26522 13.1054 7.51957 13.2929 7.70711C13.4804 7.89464 13.7348 8 14 8H19C19.2652 8 19.5196 7.89464 19.7071 7.70711C19.8946 7.51957 20 7.26522 20 7C20 6.73478 19.8946 6.48043 19.7071 6.29289C19.5196 6.10536 19.2652 6 19 6H14ZM14 15C13.7348 15 13.4804 15.1054 13.2929 15.2929C13.1054 15.4804 13 15.7348 13 16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17H19C19.2652 17 19.5196 16.8946 19.7071 16.7071C19.8946 16.5196 20 16.2652 20 16C20 15.7348 19.8946 15.4804 19.7071 15.2929C19.5196 15.1054 19.2652 15 19 15H14ZM4 15C4 14.4696 4.21071 13.9609 4.58579 13.5858C4.96086 13.2107 5.46957 13 6 13H9C9.53043 13 10.0391 13.2107 10.4142 13.5858C10.7893 13.9609 11 14.4696 11 15V18C11 18.5304 10.7893 19.0391 10.4142 19.4142C10.0391 19.7893 9.53043 20 9 20H6C5.46957 20 4.96086 19.7893 4.58579 19.4142C4.21071 19.0391 4 18.5304 4 18V15ZM9 15H6V18H9V15Z"
                        fill="black"
                      />
                    </svg>
                  </NuxtLink>
                  
              <!-- <NuxtLink class="btn" :to="'ruLanguage'+element?.id" title="زبان روسی">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M22.5 11.9995C22.5 17.7982 17.799 22.499 12 22.499C6.201 22.499 1.5 17.7982 1.5 11.9995C1.5 6.20077 6.201 1.5 12 1.5C17.799 1.5 22.5 6.20077 22.5 11.9995ZM18.102 6.08177C17.3104 5.26368 16.3622 4.61343 15.3138 4.16984C14.2654 3.72625 13.1384 3.4984 12 3.4999C10.7497 3.49877 9.51464 3.77401 8.38316 4.30592C7.25168 4.83784 6.25177 5.61328 5.455 6.57675C6.859 5.96278 8.347 5.98878 8.875 5.99778L9 5.99978C9.6 5.99978 10 6.39976 10 6.99973C10 7.5997 9.6 7.99968 9 7.99968C8.4 7.99968 8 8.39966 8 8.99963C8 9.5996 8.6 9.99958 9 9.99958H10C10.55 9.99958 11 10.4496 11 11.0125C10.9966 11.2755 10.8897 11.5265 10.7025 11.7112C10.5154 11.8959 10.263 11.9995 10 11.9995C7.57 11.9995 7.679 13.9994 8 14.6413C8.579 15.7993 10.61 15.4563 11.81 14.6413L12.4 14.1994C12.6122 14.0402 12.8789 13.9719 13.1414 14.0094C13.404 14.0469 13.6409 14.1872 13.8 14.3994C13.9591 14.6115 14.0275 14.8782 13.9899 15.1407C13.9524 15.4033 13.8122 15.6402 13.6 15.7993L13.071 16.1963C10.5 17.9992 13 20.4991 16.43 18.7961C17.999 17.8562 18.589 16.5623 18.704 15.3833C18.7754 14.6129 18.6622 13.8365 18.374 13.1184C18.101 12.4415 17.738 12.0165 17.467 11.8445C17.2841 11.7287 17.1436 11.5567 17.0668 11.3543C16.99 11.1519 16.981 10.93 17.041 10.722C17.1011 10.514 17.2271 10.3311 17.4 10.2009C17.573 10.0706 17.7835 9.99996 18 9.99958C18.21 9.99958 18.51 9.99958 18.856 10.0586C18.8189 9.95227 18.7703 9.85034 18.711 9.75459C18.393 9.22862 17.687 8.57765 16.486 7.85668C16.2987 7.74409 16.1535 7.57327 16.0725 7.37035C15.9916 7.16742 15.9793 6.94355 16.0376 6.73298C16.0958 6.52241 16.2215 6.33672 16.3953 6.20431C16.5691 6.0719 16.7815 6.00006 17 5.99978C17.325 5.99978 17.702 6.01678 18.102 6.08177Z" fill="black"/>
</svg>


            </NuxtLink> -->
              <NuxtLink class="btn" :to="'enLanguage'+element?.id" title="زبان انگلیسی">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M22.5 11.9995C22.5 17.7982 17.799 22.499 12 22.499C6.201 22.499 1.5 17.7982 1.5 11.9995C1.5 6.20077 6.201 1.5 12 1.5C17.799 1.5 22.5 6.20077 22.5 11.9995ZM18.102 6.08177C17.3104 5.26368 16.3622 4.61343 15.3138 4.16984C14.2654 3.72625 13.1384 3.4984 12 3.4999C10.7497 3.49877 9.51464 3.77401 8.38316 4.30592C7.25168 4.83784 6.25177 5.61328 5.455 6.57675C6.859 5.96278 8.347 5.98878 8.875 5.99778L9 5.99978C9.6 5.99978 10 6.39976 10 6.99973C10 7.5997 9.6 7.99968 9 7.99968C8.4 7.99968 8 8.39966 8 8.99963C8 9.5996 8.6 9.99958 9 9.99958H10C10.55 9.99958 11 10.4496 11 11.0125C10.9966 11.2755 10.8897 11.5265 10.7025 11.7112C10.5154 11.8959 10.263 11.9995 10 11.9995C7.57 11.9995 7.679 13.9994 8 14.6413C8.579 15.7993 10.61 15.4563 11.81 14.6413L12.4 14.1994C12.6122 14.0402 12.8789 13.9719 13.1414 14.0094C13.404 14.0469 13.6409 14.1872 13.8 14.3994C13.9591 14.6115 14.0275 14.8782 13.9899 15.1407C13.9524 15.4033 13.8122 15.6402 13.6 15.7993L13.071 16.1963C10.5 17.9992 13 20.4991 16.43 18.7961C17.999 17.8562 18.589 16.5623 18.704 15.3833C18.7754 14.6129 18.6622 13.8365 18.374 13.1184C18.101 12.4415 17.738 12.0165 17.467 11.8445C17.2841 11.7287 17.1436 11.5567 17.0668 11.3543C16.99 11.1519 16.981 10.93 17.041 10.722C17.1011 10.514 17.2271 10.3311 17.4 10.2009C17.573 10.0706 17.7835 9.99996 18 9.99958C18.21 9.99958 18.51 9.99958 18.856 10.0586C18.8189 9.95227 18.7703 9.85034 18.711 9.75459C18.393 9.22862 17.687 8.57765 16.486 7.85668C16.2987 7.74409 16.1535 7.57327 16.0725 7.37035C15.9916 7.16742 15.9793 6.94355 16.0376 6.73298C16.0958 6.52241 16.2215 6.33672 16.3953 6.20431C16.5691 6.0719 16.7815 6.00006 17 5.99978C17.325 5.99978 17.702 6.01678 18.102 6.08177Z" fill="black"/>
</svg>


            </NuxtLink>
                  <button class="btn" @click="getCategoryItem(element.id)">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M21.121 2.707C20.5584 2.14459 19.7955 1.82864 19 1.82864C18.2045 1.82864 17.4416 2.14459 16.879 2.707L15.199 4.387L7.293 12.293C7.16494 12.421 7.07404 12.5814 7.03 12.757L6.03 16.757C5.98803 16.9246 5.99018 17.1002 6.03626 17.2667C6.08234 17.4332 6.17077 17.5849 6.29293 17.7071C6.41509 17.8292 6.56681 17.9177 6.73331 17.9637C6.89982 18.0098 7.07542 18.012 7.243 17.97L11.243 16.97C11.4186 16.926 11.579 16.8351 11.707 16.707L19.556 8.859L21.293 7.121C21.8554 6.55842 22.1714 5.7955 22.1714 5C22.1714 4.20451 21.8554 3.44159 21.293 2.879L21.121 2.707ZM18.293 4.121C18.4805 3.93353 18.7348 3.82822 19 3.82822C19.2652 3.82822 19.5195 3.93353 19.707 4.121L19.879 4.293C20.0665 4.48053 20.1718 4.73484 20.1718 5C20.1718 5.26517 20.0665 5.51948 19.879 5.707L18.862 6.724L17.307 5.107L18.293 4.121ZM15.893 6.521L17.448 8.138L10.488 15.097L8.374 15.626L8.903 13.511L15.893 6.521ZM4 8C4 7.73479 4.10536 7.48043 4.29289 7.2929C4.48043 7.10536 4.73478 7 5 7H10C10.2652 7 10.5196 6.89465 10.7071 6.70711C10.8946 6.51957 11 6.26522 11 6C11 5.73479 10.8946 5.48043 10.7071 5.2929C10.5196 5.10536 10.2652 5 10 5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V19C2 19.7957 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H16C16.7956 22 17.5587 21.6839 18.1213 21.1213C18.6839 20.5587 19 19.7957 19 19V14C19 13.7348 18.8946 13.4804 18.7071 13.2929C18.5196 13.1054 18.2652 13 18 13C17.7348 13 17.4804 13.1054 17.2929 13.2929C17.1054 13.4804 17 13.7348 17 14V19C17 19.2652 16.8946 19.5196 16.7071 19.7071C16.5196 19.8946 16.2652 20 16 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V8Z"
                        fill="black"
                      />
                    </svg>
                  </button>
                  <button class="btn" @click="()=>{showDeleteModal = true ;elId=element?.id}">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M9 5C9 4.46957 9.21071 3.96086 9.58579 3.58579C9.96086 3.21071 10.4696 3 11 3H13C13.5304 3 14.0391 3.21071 14.4142 3.58579C14.7893 3.96086 15 4.46957 15 5V6H19C19.2652 6 19.5196 6.10536 19.7071 6.29289C19.8946 6.48043 20 6.73478 20 7C20 7.26522 19.8946 7.51957 19.7071 7.70711C19.5196 7.89464 19.2652 8 19 8H18V18C18 18.7956 17.6839 19.5587 17.1213 20.1213C16.5587 20.6839 15.7956 21 15 21H9C8.20435 21 7.44129 20.6839 6.87868 20.1213C6.31607 19.5587 6 18.7956 6 18V8H5C4.73478 8 4.48043 7.89464 4.29289 7.70711C4.10536 7.51957 4 7.26522 4 7C4 6.73478 4.10536 6.48043 4.29289 6.29289C4.48043 6.10536 4.73478 6 5 6H9V5ZM10 8H8V18C8 18.2652 8.10536 18.5196 8.29289 18.7071C8.48043 18.8946 8.73478 19 9 19H15C15.2652 19 15.5196 18.8946 15.7071 18.7071C15.8946 18.5196 16 18.2652 16 18V8H10ZM13 6H11V5H13V6ZM10 9C10.2652 9 10.5196 9.10536 10.7071 9.29289C10.8946 9.48043 11 9.73478 11 10V17C11 17.2652 10.8946 17.5196 10.7071 17.7071C10.5196 17.8946 10.2652 18 10 18C9.73478 18 9.48043 17.8946 9.29289 17.7071C9.10536 17.5196 9 17.2652 9 17V10C9 9.73478 9.10536 9.48043 9.29289 9.29289C9.48043 9.10536 9.73478 9 10 9ZM14 9C14.2652 9 14.5196 9.10536 14.7071 9.29289C14.8946 9.48043 15 9.73478 15 10V17C15 17.2652 14.8946 17.5196 14.7071 17.7071C14.5196 17.8946 14.2652 18 14 18C13.7348 18 13.4804 17.8946 13.2929 17.7071C13.1054 17.5196 13 17.2652 13 17V10C13 9.73478 13.1054 9.48043 13.2929 9.29289C13.4804 9.10536 13.7348 9 14 9Z"
                        fill="black"
                      />
                    </svg>
                  </button>
                </div>
                
                <br>
                <ul class="w-full ps-5 list-disc">
              <li
                v-for="data in element.children"
                :key="data?.id"
                class="flex flex-wrap items-center"
              >
                <span
                  >{{ data.name }} <sub>({{ data?.label }})</sub></span
                >

                <div
                  class="btn-box flex items-center justify-center w-[140px] p-1 my-1"
                >
                  <button class="btn" @click="addSubCategory(data.id)">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M3 11.9995C3 10.8176 3.23279 9.64736 3.68508 8.55548C4.13738 7.46361 4.80031 6.4715 5.63604 5.63581C6.47177 4.80013 7.46392 4.13722 8.55585 3.68495C9.64778 3.23268 10.8181 2.9999 12 2.9999C13.1819 2.9999 14.3522 3.23268 15.4442 3.68495C16.5361 4.13722 17.5282 4.80013 18.364 5.63581C19.1997 6.4715 19.8626 7.46361 20.3149 8.55548C20.7672 9.64736 21 10.8176 21 11.9995C21 14.3863 20.0518 16.6754 18.364 18.3631C16.6761 20.0509 14.3869 20.999 12 20.999C9.61305 20.999 7.32387 20.0509 5.63604 18.3631C3.94821 16.6754 3 14.3863 3 11.9995ZM12 1C5.925 1 1 5.92476 1 11.9995C1 18.0742 5.925 22.9989 12 22.9989C18.075 22.9989 23 18.0742 23 11.9995C23 5.92476 18.075 1 12 1ZM13 6.99971C13 6.73451 12.8946 6.48016 12.7071 6.29264C12.5196 6.10511 12.2652 5.99976 12 5.99976C11.7348 5.99976 11.4804 6.10511 11.2929 6.29264C11.1054 6.48016 11 6.73451 11 6.99971V10.9995H7C6.73478 10.9995 6.48043 11.1049 6.29289 11.2924C6.10536 11.4799 6 11.7343 6 11.9995C6 12.2647 6.10536 12.519 6.29289 12.7065C6.48043 12.8941 6.73478 12.9994 7 12.9994H11V16.9992C11 17.2644 11.1054 17.5188 11.2929 17.7063C11.4804 17.8938 11.7348 17.9992 12 17.9992C12.2652 17.9992 12.5196 17.8938 12.7071 17.7063C12.8946 17.5188 13 17.2644 13 16.9992V12.9994H17C17.2652 12.9994 17.5196 12.8941 17.7071 12.7065C17.8946 12.519 18 12.2647 18 11.9995C18 11.7343 17.8946 11.4799 17.7071 11.2924C17.5196 11.1049 17.2652 10.9995 17 10.9995H13V6.99971Z"
                        fill="black"
                      />
                    </svg>
                  </button>

                  <NuxtLink
                    :to="'/categoryFeature/insert' + data.id"
                    class="btn"
                  >
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M6 4C5.46957 4 4.96086 4.21071 4.58579 4.58579C4.21071 4.96086 4 5.46957 4 6V9C4 9.53043 4.21071 10.0391 4.58579 10.4142C4.96086 10.7893 5.46957 11 6 11H9C9.53043 11 10.0391 10.7893 10.4142 10.4142C10.7893 10.0391 11 9.53043 11 9V6C11 5.46957 10.7893 4.96086 10.4142 4.58579C10.0391 4.21071 9.53043 4 9 4H6ZM6 6H9V9H6V6ZM14 6C13.7348 6 13.4804 6.10536 13.2929 6.29289C13.1054 6.48043 13 6.73478 13 7C13 7.26522 13.1054 7.51957 13.2929 7.70711C13.4804 7.89464 13.7348 8 14 8H19C19.2652 8 19.5196 7.89464 19.7071 7.70711C19.8946 7.51957 20 7.26522 20 7C20 6.73478 19.8946 6.48043 19.7071 6.29289C19.5196 6.10536 19.2652 6 19 6H14ZM14 15C13.7348 15 13.4804 15.1054 13.2929 15.2929C13.1054 15.4804 13 15.7348 13 16C13 16.2652 13.1054 16.5196 13.2929 16.7071C13.4804 16.8946 13.7348 17 14 17H19C19.2652 17 19.5196 16.8946 19.7071 16.7071C19.8946 16.5196 20 16.2652 20 16C20 15.7348 19.8946 15.4804 19.7071 15.2929C19.5196 15.1054 19.2652 15 19 15H14ZM4 15C4 14.4696 4.21071 13.9609 4.58579 13.5858C4.96086 13.2107 5.46957 13 6 13H9C9.53043 13 10.0391 13.2107 10.4142 13.5858C10.7893 13.9609 11 14.4696 11 15V18C11 18.5304 10.7893 19.0391 10.4142 19.4142C10.0391 19.7893 9.53043 20 9 20H6C5.46957 20 4.96086 19.7893 4.58579 19.4142C4.21071 19.0391 4 18.5304 4 18V15ZM9 15H6V18H9V15Z"
                        fill="black"
                      />
                    </svg>
                  </NuxtLink>
                  <!-- <NuxtLink :to="'/discount?categoryId='+item?.id+'&isAvailable='+true" class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12.79 21L3 11.21v2c0 .53.21 1.04.59 1.41l7.79 7.79c.78.78 2.05.78 2.83 0l6.21-6.21c.78-.78.78-2.05 0-2.83z"/><path fill="currentColor" d="M11.38 17.41c.39.39.9.59 1.41.59c.51 0 1.02-.2 1.41-.59l6.21-6.21c.78-.78.78-2.05 0-2.83L12.62.58C12.25.21 11.74 0 11.21 0H5C3.9 0 3 .9 3 2v6.21c0 .53.21 1.04.59 1.41zM5 2h6.21L19 9.79L12.79 16L5 8.21z"/><circle cx="7.25" cy="4.25" r="1.25" fill="currentColor"/></svg>
              </NuxtLink>
              <NuxtLink :to="'/discount/insertnew?typeId=41&catId=' + item.id" class="btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-tag" viewBox="0 0 16 16">
  <path d="M6 4.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m-1 0a.5.5 0 1 0-1 0 .5.5 0 0 0 1 0"/>
  <path d="M2 1h4.586a1 1 0 0 1 .707.293l7 7a1 1 0 0 1 0 1.414l-4.586 4.586a1 1 0 0 1-1.414 0l-7-7A1 1 0 0 1 1 6.586V2a1 1 0 0 1 1-1m0 5.586 7 7L13.586 9l-7-7H2z"/>
</svg>
              </NuxtLink> -->
<!--               
              <NuxtLink class="btn" :to="'ruLanguage'+data?.id" title="زبان روسی">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M22.5 11.9995C22.5 17.7982 17.799 22.499 12 22.499C6.201 22.499 1.5 17.7982 1.5 11.9995C1.5 6.20077 6.201 1.5 12 1.5C17.799 1.5 22.5 6.20077 22.5 11.9995ZM18.102 6.08177C17.3104 5.26368 16.3622 4.61343 15.3138 4.16984C14.2654 3.72625 13.1384 3.4984 12 3.4999C10.7497 3.49877 9.51464 3.77401 8.38316 4.30592C7.25168 4.83784 6.25177 5.61328 5.455 6.57675C6.859 5.96278 8.347 5.98878 8.875 5.99778L9 5.99978C9.6 5.99978 10 6.39976 10 6.99973C10 7.5997 9.6 7.99968 9 7.99968C8.4 7.99968 8 8.39966 8 8.99963C8 9.5996 8.6 9.99958 9 9.99958H10C10.55 9.99958 11 10.4496 11 11.0125C10.9966 11.2755 10.8897 11.5265 10.7025 11.7112C10.5154 11.8959 10.263 11.9995 10 11.9995C7.57 11.9995 7.679 13.9994 8 14.6413C8.579 15.7993 10.61 15.4563 11.81 14.6413L12.4 14.1994C12.6122 14.0402 12.8789 13.9719 13.1414 14.0094C13.404 14.0469 13.6409 14.1872 13.8 14.3994C13.9591 14.6115 14.0275 14.8782 13.9899 15.1407C13.9524 15.4033 13.8122 15.6402 13.6 15.7993L13.071 16.1963C10.5 17.9992 13 20.4991 16.43 18.7961C17.999 17.8562 18.589 16.5623 18.704 15.3833C18.7754 14.6129 18.6622 13.8365 18.374 13.1184C18.101 12.4415 17.738 12.0165 17.467 11.8445C17.2841 11.7287 17.1436 11.5567 17.0668 11.3543C16.99 11.1519 16.981 10.93 17.041 10.722C17.1011 10.514 17.2271 10.3311 17.4 10.2009C17.573 10.0706 17.7835 9.99996 18 9.99958C18.21 9.99958 18.51 9.99958 18.856 10.0586C18.8189 9.95227 18.7703 9.85034 18.711 9.75459C18.393 9.22862 17.687 8.57765 16.486 7.85668C16.2987 7.74409 16.1535 7.57327 16.0725 7.37035C15.9916 7.16742 15.9793 6.94355 16.0376 6.73298C16.0958 6.52241 16.2215 6.33672 16.3953 6.20431C16.5691 6.0719 16.7815 6.00006 17 5.99978C17.325 5.99978 17.702 6.01678 18.102 6.08177Z" fill="black"/>
</svg>


            </NuxtLink> -->
              <NuxtLink class="btn" :to="'enLanguage'+data?.id" title="زبان انگلیسی">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M22.5 11.9995C22.5 17.7982 17.799 22.499 12 22.499C6.201 22.499 1.5 17.7982 1.5 11.9995C1.5 6.20077 6.201 1.5 12 1.5C17.799 1.5 22.5 6.20077 22.5 11.9995ZM18.102 6.08177C17.3104 5.26368 16.3622 4.61343 15.3138 4.16984C14.2654 3.72625 13.1384 3.4984 12 3.4999C10.7497 3.49877 9.51464 3.77401 8.38316 4.30592C7.25168 4.83784 6.25177 5.61328 5.455 6.57675C6.859 5.96278 8.347 5.98878 8.875 5.99778L9 5.99978C9.6 5.99978 10 6.39976 10 6.99973C10 7.5997 9.6 7.99968 9 7.99968C8.4 7.99968 8 8.39966 8 8.99963C8 9.5996 8.6 9.99958 9 9.99958H10C10.55 9.99958 11 10.4496 11 11.0125C10.9966 11.2755 10.8897 11.5265 10.7025 11.7112C10.5154 11.8959 10.263 11.9995 10 11.9995C7.57 11.9995 7.679 13.9994 8 14.6413C8.579 15.7993 10.61 15.4563 11.81 14.6413L12.4 14.1994C12.6122 14.0402 12.8789 13.9719 13.1414 14.0094C13.404 14.0469 13.6409 14.1872 13.8 14.3994C13.9591 14.6115 14.0275 14.8782 13.9899 15.1407C13.9524 15.4033 13.8122 15.6402 13.6 15.7993L13.071 16.1963C10.5 17.9992 13 20.4991 16.43 18.7961C17.999 17.8562 18.589 16.5623 18.704 15.3833C18.7754 14.6129 18.6622 13.8365 18.374 13.1184C18.101 12.4415 17.738 12.0165 17.467 11.8445C17.2841 11.7287 17.1436 11.5567 17.0668 11.3543C16.99 11.1519 16.981 10.93 17.041 10.722C17.1011 10.514 17.2271 10.3311 17.4 10.2009C17.573 10.0706 17.7835 9.99996 18 9.99958C18.21 9.99958 18.51 9.99958 18.856 10.0586C18.8189 9.95227 18.7703 9.85034 18.711 9.75459C18.393 9.22862 17.687 8.57765 16.486 7.85668C16.2987 7.74409 16.1535 7.57327 16.0725 7.37035C15.9916 7.16742 15.9793 6.94355 16.0376 6.73298C16.0958 6.52241 16.2215 6.33672 16.3953 6.20431C16.5691 6.0719 16.7815 6.00006 17 5.99978C17.325 5.99978 17.702 6.01678 18.102 6.08177Z" fill="black"/>
</svg>


            </NuxtLink>
                  <button class="btn" @click="getCategoryItem(data.id)">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M21.121 2.707C20.5584 2.14459 19.7955 1.82864 19 1.82864C18.2045 1.82864 17.4416 2.14459 16.879 2.707L15.199 4.387L7.293 12.293C7.16494 12.421 7.07404 12.5814 7.03 12.757L6.03 16.757C5.98803 16.9246 5.99018 17.1002 6.03626 17.2667C6.08234 17.4332 6.17077 17.5849 6.29293 17.7071C6.41509 17.8292 6.56681 17.9177 6.73331 17.9637C6.89982 18.0098 7.07542 18.012 7.243 17.97L11.243 16.97C11.4186 16.926 11.579 16.8351 11.707 16.707L19.556 8.859L21.293 7.121C21.8554 6.55842 22.1714 5.7955 22.1714 5C22.1714 4.20451 21.8554 3.44159 21.293 2.879L21.121 2.707ZM18.293 4.121C18.4805 3.93353 18.7348 3.82822 19 3.82822C19.2652 3.82822 19.5195 3.93353 19.707 4.121L19.879 4.293C20.0665 4.48053 20.1718 4.73484 20.1718 5C20.1718 5.26517 20.0665 5.51948 19.879 5.707L18.862 6.724L17.307 5.107L18.293 4.121ZM15.893 6.521L17.448 8.138L10.488 15.097L8.374 15.626L8.903 13.511L15.893 6.521ZM4 8C4 7.73479 4.10536 7.48043 4.29289 7.2929C4.48043 7.10536 4.73478 7 5 7H10C10.2652 7 10.5196 6.89465 10.7071 6.70711C10.8946 6.51957 11 6.26522 11 6C11 5.73479 10.8946 5.48043 10.7071 5.2929C10.5196 5.10536 10.2652 5 10 5H5C4.20435 5 3.44129 5.31607 2.87868 5.87868C2.31607 6.44129 2 7.20435 2 8V19C2 19.7957 2.31607 20.5587 2.87868 21.1213C3.44129 21.6839 4.20435 22 5 22H16C16.7956 22 17.5587 21.6839 18.1213 21.1213C18.6839 20.5587 19 19.7957 19 19V14C19 13.7348 18.8946 13.4804 18.7071 13.2929C18.5196 13.1054 18.2652 13 18 13C17.7348 13 17.4804 13.1054 17.2929 13.2929C17.1054 13.4804 17 13.7348 17 14V19C17 19.2652 16.8946 19.5196 16.7071 19.7071C16.5196 19.8946 16.2652 20 16 20H5C4.73478 20 4.48043 19.8946 4.29289 19.7071C4.10536 19.5196 4 19.2652 4 19V8Z"
                        fill="black"
                      />
                    </svg>
                  </button>
                  <button class="btn" @click="()=>{showDeleteModal = true ;elId=data?.id}">
                    <svg
                      width="24"
                      height="24"
                      viewBox="0 0 24 24"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M9 5C9 4.46957 9.21071 3.96086 9.58579 3.58579C9.96086 3.21071 10.4696 3 11 3H13C13.5304 3 14.0391 3.21071 14.4142 3.58579C14.7893 3.96086 15 4.46957 15 5V6H19C19.2652 6 19.5196 6.10536 19.7071 6.29289C19.8946 6.48043 20 6.73478 20 7C20 7.26522 19.8946 7.51957 19.7071 7.70711C19.5196 7.89464 19.2652 8 19 8H18V18C18 18.7956 17.6839 19.5587 17.1213 20.1213C16.5587 20.6839 15.7956 21 15 21H9C8.20435 21 7.44129 20.6839 6.87868 20.1213C6.31607 19.5587 6 18.7956 6 18V8H5C4.73478 8 4.48043 7.89464 4.29289 7.70711C4.10536 7.51957 4 7.26522 4 7C4 6.73478 4.10536 6.48043 4.29289 6.29289C4.48043 6.10536 4.73478 6 5 6H9V5ZM10 8H8V18C8 18.2652 8.10536 18.5196 8.29289 18.7071C8.48043 18.8946 8.73478 19 9 19H15C15.2652 19 15.5196 18.8946 15.7071 18.7071C15.8946 18.5196 16 18.2652 16 18V8H10ZM13 6H11V5H13V6ZM10 9C10.2652 9 10.5196 9.10536 10.7071 9.29289C10.8946 9.48043 11 9.73478 11 10V17C11 17.2652 10.8946 17.5196 10.7071 17.7071C10.5196 17.8946 10.2652 18 10 18C9.73478 18 9.48043 17.8946 9.29289 17.7071C9.10536 17.5196 9 17.2652 9 17V10C9 9.73478 9.10536 9.48043 9.29289 9.29289C9.48043 9.10536 9.73478 9 10 9ZM14 9C14.2652 9 14.5196 9.10536 14.7071 9.29289C14.8946 9.48043 15 9.73478 15 10V17C15 17.2652 14.8946 17.5196 14.7071 17.7071C14.5196 17.8946 14.2652 18 14 18C13.7348 18 13.4804 17.8946 13.2929 17.7071C13.1054 17.5196 13 17.2652 13 17V10C13 9.73478 13.1054 9.48043 13.2929 9.29289C13.4804 9.10536 13.7348 9 14 9Z"
                        fill="black"
                      />
                    </svg>
                  </button>
                </div>
              </li>
            </ul>
              </li>
            </ul>
          </li>
          <li></li>
        </ul>
        <button
          class="btn border p-2 rounded px-4 flex items-center bg-[#eee] h-[50px]"
          :class="{ hidden: showFormSec == true }"
          @click="addSubCategory(route.params.id) "
        >
          <svg
            class="mr-2"
            width="22"
            height="22"
            viewBox="0 0 22 22"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M2 10.9995C2 9.81763 2.23279 8.64736 2.68508 7.55548C3.13738 6.46361 3.80031 5.4715 4.63604 4.63581C5.47177 3.80013 6.46392 3.13722 7.55585 2.68495C8.64778 2.23268 9.8181 1.9999 11 1.9999C12.1819 1.9999 13.3522 2.23268 14.4442 2.68495C15.5361 3.13722 16.5282 3.80013 17.364 4.63581C18.1997 5.4715 18.8626 6.46361 19.3149 7.55548C19.7672 8.64736 20 9.81763 20 10.9995C20 13.3863 19.0518 15.6754 17.364 17.3631C15.6761 19.0509 13.3869 19.999 11 19.999C8.61305 19.999 6.32387 19.0509 4.63604 17.3631C2.94821 15.6754 2 13.3863 2 10.9995ZM11 0C4.925 0 0 4.92476 0 10.9995C0 17.0742 4.925 21.9989 11 21.9989C17.075 21.9989 22 17.0742 22 10.9995C22 4.92476 17.075 0 11 0ZM12 5.99971C12 5.73451 11.8946 5.48016 11.7071 5.29264C11.5196 5.10511 11.2652 4.99976 11 4.99976C10.7348 4.99976 10.4804 5.10511 10.2929 5.29264C10.1054 5.48016 10 5.73451 10 5.99971V9.99952H6C5.73478 9.99952 5.48043 10.1049 5.29289 10.2924C5.10536 10.4799 5 10.7343 5 10.9995C5 11.2647 5.10536 11.519 5.29289 11.7065C5.48043 11.8941 5.73478 11.9994 6 11.9994H10V15.9992C10 16.2644 10.1054 16.5188 10.2929 16.7063C10.4804 16.8938 10.7348 16.9992 11 16.9992C11.2652 16.9992 11.5196 16.8938 11.7071 16.7063C11.8946 16.5188 12 16.2644 12 15.9992V11.9994H16C16.2652 11.9994 16.5196 11.8941 16.7071 11.7065C16.8946 11.519 17 11.2647 17 10.9995C17 10.7343 16.8946 10.4799 16.7071 10.2924C16.5196 10.1049 16.2652 9.99952 16 9.99952H12V5.99971Z"
              fill="black"
            />
          </svg>
          <span class="whitespace-nowrap"> {{ $t("addNewItem") }}</span>
        </button>
      </li>
    </ul>
  </div>
  </div>

  <div
    class="insert-box flex flex-wrap"
    :class="{ hidden: showFormSec == false }"
  >
  <div class="flex justify-between items-center w-full">
    <strong v-if="isEdit" class="title flex w-full"> {{ $t("edite") }}</strong>
    <strong v-else class="title flex w-full">{{ $t("confirm") }}</strong>
    <div class="p-2 border rounded-md bg-gray-200 flex gap-2" @click="showFormSec=false">بازگشت<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 48 48"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4"><path d="m13 8l-7 6l7 7"/><path d="M6 14h22.994c6.883 0 12.728 5.62 12.996 12.5c.284 7.27-5.723 13.5-12.996 13.5H11.998"/></g></svg> </div>
  </div>
    <div class="bg-[#fff] mt-4 p-4 w-full flex flex-wrap insert-box border">
      <!-- <div class="input-box flex flex-col lg:w-1/6 p-1">
                <label for="">شناسه پدر:</label>
                <input class="border w-full h-[40px] mt-2" type="text" name="" readonly v-model="newCategory.parentId" id="">
            </div> -->

      <div class="input-box flex flex-col lg:w-2/6 p-1">
        <label for="">
          <span class="text-red-500">*</span> {{ $t("title") }}:</label
        >
        <input
          class="border w-full h-[40px] mt-2"
          type="text"
          name=""
          v-model="newCategory.name"
          id=""
        />
      </div>
      <div class="input-box flex flex-col p-1">
        <label for="">
          <span class="text-red-500">*</span> {{ $t("label") }}:</label
        >
                   <Slug v-model:value="newCategory.label" v-model:isAccept="acceptSlug" mode="category" :editId="isEdit?newCategory.id:null"/>
      </div>
      <div class="input-box flex flex-col  p-1">
        <label for=""> {{ $t("priority") }}:</label>
        <input
          class="border w-full h-[40px] mt-2"
          type="text"
          name=""
          v-model="newCategory.priority"
          id=""
        />
      </div>
    </div>
    <div class="bg-[#fff] mt-4 p-4 w-full insert-box border flex">
      <div class="input-box flex flex-col w-full p-1">
        ایکون
        <div class="body-box flex flex-wrap p-2 items-start">
          <img
            class="h-[300px] w-full border p-1 mb-3 object-contain"
            v-if="newCategory.iconId != null"
            
             :src="getPicUrl(newCategory?.icon)"
          />

          <UploadImage
            FileInputId="id1"
            v-else
            @getPictureId="
              (n, pic) => {
                newCategory.iconId = n;
                newCategory.icon = pic;
                
              }
            "
          ></UploadImage>
          <button
            class="w-full flex justify-center bg-[#e3e3e3] p-2 rounded"
            @click="newCategory.iconId = null"
            v-if="newCategory.iconId != null"
          >
            <svg
              width="24"
              height="25"
              viewBox="0 0 24 25"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M3 6.99747C3 6.20182 3.31607 5.43876 3.87868 4.87615C4.44129 4.31354 5.20435 3.99747 6 3.99747H18C18.7956 3.99747 19.5587 4.31354 20.1213 4.87615C20.6839 5.43876 21 6.20182 21 6.99747V18.9975C21 19.7931 20.6839 20.5562 20.1213 21.1188C19.5587 21.6814 18.7956 21.9975 18 21.9975H6C5.20435 21.9975 4.44129 21.6814 3.87868 21.1188C3.31607 20.5562 3 19.7931 3 18.9975V6.99747ZM19 6.99747V15.5835L15.707 12.2905C15.5195 12.103 15.2652 11.9977 15 11.9977C14.7348 11.9977 14.4805 12.103 14.293 12.2905L13 13.5835L9.207 9.79047C9.01947 9.603 8.76516 9.49768 8.5 9.49768C8.23484 9.49768 7.98053 9.603 7.793 9.79047L5 12.5835V6.99747C5 6.73225 5.10536 6.4779 5.29289 6.29036C5.48043 6.10282 5.73478 5.99747 6 5.99747H18C18.2652 5.99747 18.5196 6.10282 18.7071 6.29036C18.8946 6.4779 19 6.73225 19 6.99747ZM5 18.9975V15.4115L8.5 11.9115L12.293 15.7045C12.4805 15.8919 12.7348 15.9973 13 15.9973C13.2652 15.9973 13.5195 15.8919 13.707 15.7045L15 14.4115L19 18.4115V18.9975C19 19.2627 18.8946 19.517 18.7071 19.7046C18.5196 19.8921 18.2652 19.9975 18 19.9975H6C5.73478 19.9975 5.48043 19.8921 5.29289 19.7046C5.10536 19.517 5 19.2627 5 18.9975ZM14.5 10.9975C14.8978 10.9975 15.2794 10.8394 15.5607 10.5581C15.842 10.2768 16 9.89529 16 9.49747C16 9.09964 15.842 8.71811 15.5607 8.43681C15.2794 8.1555 14.8978 7.99747 14.5 7.99747C14.1022 7.99747 13.7206 8.1555 13.4393 8.43681C13.158 8.71811 13 9.09964 13 9.49747C13 9.89529 13.158 10.2768 13.4393 10.5581C13.7206 10.8394 14.1022 10.9975 14.5 10.9975Z"
                fill="black"
              />
            </svg>

            {{ $t("edite") }}
          </button>
        </div>
      </div>
    </div>
    <div class="bg-[#fff] mt-4 p-4 w-full insert-box border flex">
      <div class="input-box flex flex-col w-full p-1">
        <div class="body-box flex flex-wrap p-2 items-start">
          <img
            class="h-[300px] w-full border p-1 mb-3 object-contain"
            v-if="newCategory.pictureId != null"
            :src="getPicUrl(newCategory?.picture)"
          />

          <UploadImage
            v-else
            @getPictureId="
              (n, pic) => {
                newCategory.pictureId = n;
                newCategory.picture=pic
                ;
              }
            "
          ></UploadImage>
          <button
            class="w-full flex justify-center bg-[#e3e3e3] p-2 rounded"
            @click="newCategory.pictureId = null"
            v-if="newCategory.pictureId != null"
          >
            <svg
              width="24"
              height="25"
              viewBox="0 0 24 25"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M3 6.99747C3 6.20182 3.31607 5.43876 3.87868 4.87615C4.44129 4.31354 5.20435 3.99747 6 3.99747H18C18.7956 3.99747 19.5587 4.31354 20.1213 4.87615C20.6839 5.43876 21 6.20182 21 6.99747V18.9975C21 19.7931 20.6839 20.5562 20.1213 21.1188C19.5587 21.6814 18.7956 21.9975 18 21.9975H6C5.20435 21.9975 4.44129 21.6814 3.87868 21.1188C3.31607 20.5562 3 19.7931 3 18.9975V6.99747ZM19 6.99747V15.5835L15.707 12.2905C15.5195 12.103 15.2652 11.9977 15 11.9977C14.7348 11.9977 14.4805 12.103 14.293 12.2905L13 13.5835L9.207 9.79047C9.01947 9.603 8.76516 9.49768 8.5 9.49768C8.23484 9.49768 7.98053 9.603 7.793 9.79047L5 12.5835V6.99747C5 6.73225 5.10536 6.4779 5.29289 6.29036C5.48043 6.10282 5.73478 5.99747 6 5.99747H18C18.2652 5.99747 18.5196 6.10282 18.7071 6.29036C18.8946 6.4779 19 6.73225 19 6.99747ZM5 18.9975V15.4115L8.5 11.9115L12.293 15.7045C12.4805 15.8919 12.7348 15.9973 13 15.9973C13.2652 15.9973 13.5195 15.8919 13.707 15.7045L15 14.4115L19 18.4115V18.9975C19 19.2627 18.8946 19.517 18.7071 19.7046C18.5196 19.8921 18.2652 19.9975 18 19.9975H6C5.73478 19.9975 5.48043 19.8921 5.29289 19.7046C5.10536 19.517 5 19.2627 5 18.9975ZM14.5 10.9975C14.8978 10.9975 15.2794 10.8394 15.5607 10.5581C15.842 10.2768 16 9.89529 16 9.49747C16 9.09964 15.842 8.71811 15.5607 8.43681C15.2794 8.1555 14.8978 7.99747 14.5 7.99747C14.1022 7.99747 13.7206 8.1555 13.4393 8.43681C13.158 8.71811 13 9.09964 13 9.49747C13 9.89529 13.158 10.2768 13.4393 10.5581C13.7206 10.8394 14.1022 10.9975 14.5 10.9975Z"
                fill="black"
              />
            </svg>

            {{ $t("edite") }}
          </button>
        </div>
      </div>
    </div>
    <div class="bg-[#fff] mt-4 p-4 w-full insert-box border">
      <div class="input-box flex flex-col w-full p-1">
        <label for="">{{ $t("summary") }}:</label>
        <textarea
          class="border w-full h-100 mt-2"
          type="text"
          name=""
          v-model="newCategory.summary"
          id=""
        ></textarea>
      </div>
    </div>
    <div class="bg-[#fff] mt-4 p-4 w-full insert-box border">
      <div class="input-box flex flex-col w-full p-1">
        <label for="">{{ $t("description") }}:</label>
        <RichEditor v-model="newCategory.description" />
      </div>
    </div>
    <div class="bg-[#fff] mt-4 p-4 w-full insert-box border flex flex-wrap">
      <div class="input-box flex flex-col lg:w-2/6 p-1">
        <label for=""> {{ $t("SEOH1") }}<sub>(SEO H1)</sub></label>
        <input
          class="border w-full h-[40px] mt-2"
          type="text"
          name=""
          id=""
          v-model="newCategory.seoH1"
        />
      </div>
      <div class="input-box flex flex-col lg:w-2/6 p-1">
        <label for=""> {{ $t("SEOAlt") }}:<sub>(SEO Alt)</sub></label>
        <input
          class="border w-full h-[40px] mt-2"
          type="text"
          name=""
          id=""
          v-model="newCategory.seoPictureAlt"
        />
      </div>
      <div class="input-box flex flex-col lg:w-2/6 p-1">
        <label for=""> {{ $t("SEOURL") }}:<sub>(SEO URL)</sub></label>
        <input
          class="border w-full h-[40px] mt-2"
          type="text"
          name=""
          id=""
          v-model="newCategory.seoUrlText"
        />
      </div>
      <div class="input-box flex flex-col lg:w-2/6 p-1">
        <label for=""> {{ $t("SEOTitle") }} :<sub>(SEO Title)</sub></label>
        <input
          class="border w-full h-[40px] mt-2"
          type="text"
          name=""
          id=""
          v-model="newCategory.seoTitle"
        />
      </div>
      <div class="input-box flex flex-col lg:w-2/6 p-1">
        <label for="">
          {{ $t("SEOCanonical") }} :<sub>(SEO Canonical)</sub></label
        >
        <input
          class="border w-full h-[40px] mt-2"
          type="text"
          name=""
          id=""
          v-model="newCategory.seoCanonical"
        />
      </div>
      <div class="input-box flex flex-col lg:w-1/6 p-1">
        <label for=""> {{ $t("NoIndex") }} :<sub>(SEO NoIndex)</sub></label>
        <div class="flex justify-start items-center pt-3">
          <input
            class="border mx-2"
            type="radio"
            name="nofollow"
            id="r3"
            @change="newCategory.seoNoIndex = true"
          />
          <label for="r3">{{ $t("yes") }}</label>
          <input
            class="border mx-2"
            type="radio"
            name="nofollow"
            id="r4"
            @change="newCategory.seoNoIndex = false"
          />

          <label for="r4">{{ $t("no") }}</label>
        </div>
      </div>
      <div class="input-box flex flex-col lg:w-1/6 p-1">
        <label for=""> {{ $t("NoFollow") }} :<sub>(SEO NoFollow)</sub></label>
        <div class="flex justify-start items-center pt-3">
          <input
            class="border mx-2"
            type="radio"
            name="nofollow"
            id="r3"
            @change="newCategory.seoNoFollow = true"
          />
          <label for="r3">{{ $t("yes") }}</label>
          <input
            class="border mx-2"
            type="radio"
            name="nofollow"
            id="r4"
            @change="newCategory.seoNoFollow = false"
          />

          <label for="r4">{{ $t("no") }}</label>
        </div>
      </div>
    </div>
    <div class="bg-[#fff] mt-4 p-4 w-full insert-box border">
      <div class="input-box flex flex-col w-full p-1">
        <label for="">{{ $t("summary") }}:</label>
        <textarea
          class="border w-full h-100 mt-2"
          type="text"
          name=""
          id=""
        ></textarea>
      </div>
    </div>
    <div class="bg-[#fff] mt-4 p-4 w-full  insert-box border">
      <div class="input-box flex flex-col w-full p-1">
        <label for="">خلاصه توضیحات:</label>
        <textarea
          class="border w-full h-100 mt-2"
          type="text"
          name=""
          v-model="newCategory.seoMinDescription"
          id=""
        ></textarea>
      </div>
    </div>
    <div class="bg-[#fff] mt-4 p-4 w-full insert-box border">
      <div class="input-box flex flex-col w-full p-1">
        <label for="">{{ $t("description") }}:</label>
        <RichEditor v-model="newCategory.seoDescription" />
      </div>
    </div>
    <div class="submit-box flex flex-wrap justify-end w-full">
      <div class="flex justify-start mr-auto lg:w-4/12 items-center pt-3">
        <input
          class="border mx-2"
          @click="newCategory.active = !newCategory.active"
          :checked="newCategory.active"
          type="checkbox"
          id="show"
        />
        <label for="active" @click="newCategory.active = !newCategory.active">{{
          $t("IWantToDisplayOnTheSite")
        }}</label>
      </div>
      <button
        @click="resetForm(), (showFormSec = false)"
        class="btn bg-[#333] m-3 ml-1 px-3 py-1 text-white"
      >
        {{ $t("cancel") }}
      </button>
      <button
          :class="['btn  w-2/12 my-3 px-3 py-1 text-white',isEdit ?'bg-[#2563eb]':'bg-[#136b57]']"
          @click="submitInfo"
        >
          {{isEdit ? $t("edite") :$t("confirm") }}
        </button>
    </div>
  </div>

  <ModalDelete v-if="showDeleteModal"  @closeModal="()=>{showDeleteModal=false}" @haneler="()=>{deleteCategory(elId);$emit('getReload');showDeleteModal=false;}" />

</template>

<script setup>
const {getPicUrl}=usePicture()

const {
  public: { imageUploaderUrl },
} = useRuntimeConfig();
const acceptSlug=ref(false)

const showDeleteModal = ref(false)
const elId = ref();
const route = useRoute();
const pageData = ref();
const showModal = ref(false);
const isEdit = ref(false);
const toast = useToast();
const Url = ref("");
const showFormSec = ref(false);
const newCategory = ref({
  name: "",
  summary: "",
  description: "",
  seoH1: "",
  seoMinDescription: "",
  seoDescription: "",
  seoTitle: "",
  seoPictureAlt: "",
  seoUrlText: "",
  seoNoIndex: true,
  seoNoFollow: true,
  seoCanonical: "",
  parentId: 0,
  label: null,
  priority: 0,
  active: false,
  pictureId: null,
  iconId: null,
  isNotFree: false,
});
const picture = ref({
  img: null,
  icon: null,
});
onMounted(() => {
  if (route.params.id != "new") {
    pageLoader();
    newCategory.value.parentId = route.params.id;
  }
});

const pageLoader = async () => {
  try {
    const headers = useRequestHeaders(["cookie"]);

    const data = await $fetch('/api/category/catItem', {
            method: 'GET',
            headers,
            
            query:{
                id:route.params.id,
                mode:3
            }
           
        })
    pageData.value = data.data;
    // newCategory.value.parentId = pageData?.value.parentId
    ;
    ;
  } catch (error) {
    ;
    // navigateTo("/login")
  }
};

const imageChange = async (e) => {
  // target.value = e.target.files[0];
  // value.value =  e.target.value;
  // formData.append("avatar", e.target.files[0], e.target.value)
  ;
  ;

  if (e.target.name == "image") {
    picture.value.img = URL.createObjectURL(e.target.files[0]);
  } else if (e.target.name == "icon") {
    picture.value.icon = URL.createObjectURL(e.target.files[0]);
    try {
      const formData = new FormData();
      formData.append("PictureFile", e.target.files[0]);
      const insert = await $fetch(imageUploaderUrl, {
        method: "POST",
        body: formData,
        headers: {
          Accept: "*/*",
        },
      });

      newCategory.value.iconId = insert.data.id;
      ;
    } catch (error) {
      ;console.log(error);
      
    }
  }

  // try {
  // const insert = await $fetch(imageUploaderUrl, {
  //   method: "POST",
  //   body: formData,
  //   headers: {
  //     Accept: "*/*",
  //   },
  // });

  // if(type=="icon"){
  //     alert("sss")
  // }

  //   } catch (error) {
  //     ;
  //   }
  // )
};

const submitInfo = async (type) => {
    if(!acceptSlug.value){
    toast.add({description:'وارد کردن و تایید اسلاگ الزامی میباشد',color:'red'})
    return
  }

      try {      
        let data = { ...newCategory.value };
      delete data?.picture;
      delete data?.icon;
      const res = await $fetch("/api/category/category", {
        method:isEdit.value?"put": "POST",
        body: data,
      });

      if (res?.isSuccess == true) {
        pageLoader();
        resetForm();
        showFormSec.value = false;
        isEdit.value?toast.add({description:'با موفقیت  ویرایش شد !',color:'green'}):
        toast.add({description:'با موفقیت  ثبت شد !',color:'green'} )
      } else {
        res?.messages.forEach((element) => {
          toast.add({description:element?.item1,color:'red'});
        });
      }
    } catch (error) {
      console.log(error);
      toast.add({description:'مشکلی پیش آمده است .',color:'red'})
    }
  

};

const getCategoryItem = async (id) => {
  isEdit.value = true;

  try {
    const headers = useRequestHeaders(["cookie"]);

    const data = await $fetch("/api/category/categoryItemDetail", {
      method: "GET",
      headers,
      query: {
        catId: id,
        mode:0
      },
    });

     if(data?.data?.label?.length>0)
    acceptSlug.value=true
    showFormSec.value = true;
    newCategory.value = data.data;
    ;
  } catch (error) {
    ;
    // navigateTo("/login")
  }
};

const resetForm = () => {
  newCategory.value = {
    name: "",
    summary: "",
    description: "",
    seoH1: "",
    seoMinDescription: "",
    seoDescription: "",
    seoTitle: "",
    seoPictureAlt: "",
    seoUrlText: "",
    seoNoIndex: true,
    seoNoFollow: true,
    seoCanonical: "",
    parentId:  route.params.id,
    label: "",
    priority: 0,
    active: false,
    pictureId: null,
    iconId: null,
  };
};

const addSubCategory = (id) => {
   acceptSlug.value=false
  isEdit.value = false;
  showFormSec.value = true;
   newCategory.value = {
    name: "",
    summary: "",
    description: "",
    seoH1: "",
    seoMinDescription: "",
    seoDescription: "",
    seoTitle: "",
    seoPictureAlt: "",
    seoUrlText: "",
    seoNoIndex: true,
    seoNoFollow: true,
    seoCanonical: "",
    label: "",
    priority: 0,
    parentId:id,
    active: false,
    pictureId: null,
    iconId: null,
  };
};

const deleteCategory = async (id) => {
  try {
    const headers = useRequestHeaders(["cookie"]);

    const insert = await $fetch("/api/category/category", {
      method: "DELETE",
      headers,
      query: {
        catId: id,
      },
    });
   
    if (insert?.isSuccess == true) {
      pageLoader();
        toast.add({description:'با موفقیت  حذف شد !',color:'green'})
      }else{
        insert.messages.forEach((el)=>{
          toast.add({description:el.item1,color:'red'})
        })
      }
  } catch (error) {
    ;
    // navigateTo("/login")
  }
};
</script>

<style lang="scss" scoped>
.subcategory {
  li {
    .btn-box {
      opacity: 0;
      transition: 0.2s;
      margin-right: 10px;

      svg {
        path {
          fill: #a0a0a0;
        }
      }

      .btn {
        &:hover {
          svg {
            path {
              fill: #363636;
            }
          }
        }
      }
    }

    &:hover {
      & > .btn-box {
        opacity: 1;
      }
    }
  }
}

.image-place {
  border: 3px dashed #a0a0a0;
  height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
}

// #136b57
</style>